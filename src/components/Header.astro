---
import { languages } from "../i18n/ui";
import { useTranslations, getLangFromUrl } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

interface Props {
  lang: keyof typeof languages;
}
---

<header class="border-b border-border bg-background sticky top-0 z-50">
  <div class="container mx-auto px-4 h-16 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <a
        href={`/${lang}`}
        class="font-bold text-xl tracking-tight flex items-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-6 h-6"
          ><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"
          ></path><path d="M14 2v4a2 2 0 0 0 2 2h4"></path><path d="M10 9H8"
          ></path><path d="M16 13H8"></path><path d="M16 17H8"></path></svg
        >
        MD Editor
      </a>
    </div>

    <nav
      class="hidden md:flex items-center gap-6 text-sm font-medium text-muted-foreground"
    >
      <a href="#features" class="hover:text-foreground transition-colors"
        >{t("nav.features")}</a
      >
      <a href="#how-it-works" class="hover:text-foreground transition-colors"
        >{t("nav.howItWorks")}</a
      >
      <!-- <a href="#support" class="hover:text-foreground transition-colors">{t("nav.support")}</a> -->
    </nav>

    <div class="flex items-center gap-4">
      <div class="flex items-center gap-2 text-sm text-muted-foreground">
        {
          Object.entries(languages).map(([l, label]) =>
            l === lang ? (
              <span class="font-semibold text-foreground cursor-default">
                {l.toUpperCase()}
              </span>
            ) : (
              <a href={`/${l}`} class="hover:text-foreground transition-colors">
                {l.toUpperCase()}
              </a>
            ),
          )
        }
      </div>

      <a
        href="https://buymeacoffee.com/daliego"
        target="_blank"
        rel="noopener noreferrer"
        class="hidden sm:flex items-center gap-2 bg-yellow-400 text-yellow-950 px-3 py-1.5 rounded-md text-sm font-semibold hover:bg-yellow-300 transition-colors"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-4 h-4"
          ><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path
            d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line
            x1="6"
            y1="1"
            x2="6"
            y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line
            x1="14"
            y1="1"
            x2="14"
            y2="4"></line></svg
        >
        {t("nav.buyMeCoffee")}
      </a>
    </div>
  </div>
</header>
